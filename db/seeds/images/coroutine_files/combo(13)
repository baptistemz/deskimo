YUI.add("html-file-dragdrop",function(e){"use strict";var t="htmlFileDragDrop",n=t+"-drag-over",r=t+"-error",i=["image/png","image/jpeg"];e.HtmlFileDragDrop=function(t){e.config.win.File&&e.config.win.FileList&&e.config.win.FileReader&&t.dropZone&&(this.dropZone=e.one(t.dropZone),this.dropZone.on("dragover",this.handleDragOver.bind(this)),this.dropZone.on("dragleave",this.handleDragLeave.bind(this)),this.dropZone.on("drop",this.handleDrop.bind(this)))},e.HtmlFileDragDrop.prototype.reset=function(){this.dropZone.removeClass(r),this.dropZone.removeClass(n)},e.HtmlFileDragDrop.prototype.handleDragOver=function(e){e.halt(),this.reset(),this.dropZone.addClass(n)},e.HtmlFileDragDrop.prototype.handleDragLeave=function(e){e.halt(),this.reset()},e.HtmlFileDragDrop.prototype.showError=function(){this.dropZone.addClass(r)},e.HtmlFileDragDrop.prototype.handleDrop=function(e){var t,s;e.halt(),this.dropZone.removeClass(n),t=e._event.dataTransfer.files;if(t.length>1){this.dropZone.addClass(r),this.fire("drop",new Error("FILE_COUNT"));return}s=e._event.dataTransfer.files[0];if(s&&s.name){if(i.indexOf(s.type)<0){this.fire("drop",new Error("FILE_TYPE"));return}this.fire("drop",s)}},e.augment(e.HtmlFileDragDrop,e.EventTarget,!0,null,{prefix:t})},"@VERSION@",{affinity:"",requires:["event-custom"],optional:[]});
YUI.add("hermes-template-photo-selector",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return'\n		<div class="photo-selector-search-list-yours">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n	'}function d(e,t){return'\n		<div class="photo-selector-search-list-contacts">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n	'}function v(e,t){return'\n		<div class="photo-selector-search-list-everyone">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n	'}function m(e,t){return'\n		<div class="photo-selector-search-list-marketplace"\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n	'}function g(e,t){var r="",i;r+='\n<div class="marketplace-category-wrapper is-hiding">\n	',i=n.each.call(e,e.marketplaceCategories,{hash:{},inverse:c.noop,fn:c.program(10,y,t),data:t});if(i||i===0)r+=i;return r+="\n</div>\n",r}function y(e,t){var r="",i;return r+='\n		<div class="avatar album landscape double-large marketplace marketplace-category ',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===f?i.apply(e):i),r+=l(i)+'" data-title="',(i=n.displayName)?i=i.call(e,{hash:{},data:t}):(i=e.displayName,i=typeof i===f?i.apply(e):i),r+=l(i)+'" data-value="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n			<sup class="',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===f?i.apply(e):i),r+=l(i)+'">',(i=n.displayName)?i=i.call(e,{hash:{},data:t}):(i=e.displayName,i=typeof i===f?i.apply(e):i),r+=l(i)+"</sup>\n		</div>\n	",r}function b(e,t){var r="",i,s;return r+='\n<div class="photo-selector-upload is-hiding">\n	<p class="upload-error"></p>\n	<div class="drop-zone">\n		<div class="drop-zone-content">\n			<div class="balls"></div>\n			<input type="file" class="file-select" name="file-select" accept="image/jpeg, image/png" />\n			<p><i class="upload-icon"></i>',s={hash:{intlName:"wallart.DRAG_DROP_TO_UPLOAD"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):h.call(e,"intlHTMLMessage",s)))+"</p>\n			<p>",s={hash:{intlName:"wallart.PHOTOS_UPLOADED_AS_PRIVATE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):h.call(e,"intlHTMLMessage",s)))+'</p>\n		</div>\n	</div>\n	<ul class="preview"></ul>\n</div>\n',r}function w(e,t){return'\n<div class="group-photo-selector-photos-wrapper">\n	<div class="group-photo-selector-photos photo-selector-photos">\n		<div class="group-photo-selector-photos-container">\n		</div>\n	</div>\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="photo-selector-title-bar hidden">\n	<div class="back-to-list">',a={hash:{intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</div>\n	<div class="title"></div>\n</div>\n\n<div class="photo-selector-photos-wrapper">\n	<div class="photo-selector-photos">\n		<div class="photo-selector-photos-container">\n		</div>\n		<div class="loader"><div class="balls"></div></div>\n	</div>\n</div>\n\n<div class="photo-selector-search-lists-wrapper is-hiding">\n	',u=n["if"].call(t,(o=t.searchable,o==null||o===!1?o:o.yours),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n\n	",u=n["if"].call(t,(o=t.searchable,o==null||o===!1?o:o.contacts),{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n\n	",u=n["if"].call(t,(o=t.searchable,o==null||o===!1?o:o.everyone),{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n\n	",u=n["if"].call(t,(o=t.searchable,o==null||o===!1?o:o.marketplace),{hash:{},inverse:c.noop,fn:c.program(7,m,i),data:i});if(u||u===0)s+=u;s+="\n</div>\n\n",u=n["if"].call(t,t.enableMarketplaceProducts,{hash:{},inverse:c.noop,fn:c.program(9,g,i),data:i});if(u||u===0)s+=u;s+="\n\n",u=n["if"].call(t,t.hasUploadCapabilities,{hash:{},inverse:c.noop,fn:c.program(12,b,i),data:i});if(u||u===0)s+=u;s+="\n\n",u=n["if"].call(t,t.hasGroupCapabilities,{hash:{},inverse:c.noop,fn:c.program(14,w,i),data:i});if(u||u===0)s+=u;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-list-demo-subview",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o,u=n.helperMissing,a=this.escapeExpression;return o={hash:{},data:i},a((s=n.outlet||t.outlet,s?s.call(t,t["photo-list-view"],o):u.call(t,"outlet",t["photo-list-view"],o)))}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-list-demo-subview",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-selector-photolist-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{initializer:function(t){return t.photolistViewClasses&&(t.additionalViewClasses=t.photolistViewClasses),t.photoListConfig=e.merge(t.primaryPhotoListConfig),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e=this.templates("photo-list-demo-subview")({"photo-list-view":this.subviews["photo-list-view"].get("container")});return this.setContainerHTML(e),this},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","photo-list-view","hermes-template-photo-list-demo-subview"]});
YUI.add("hermes-template-search-photos-single-row",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i;r+='\n	<h5 class="search-results-header">',i=n.unless.call(e,e.loading,{hash:{},inverse:f.noop,fn:f.program(2,h,t),data:t});if(i||i===0)r+=i;(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+" ",i=n["if"].call(e,e.loading,{hash:{},inverse:f.noop,fn:f.program(6,v,t),data:t});if(i||i===0)r+=i;r+="</h5>\n	",i=n["if"].call(e,e.loading,{hash:{},inverse:f.program(10,g,t),fn:f.program(8,m,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var r;return r=n.unless.call(e,e.singleResult,{hash:{},inverse:f.noop,fn:f.program(3,p,t),data:t}),r||r===0?r:""}function p(e,t){var r="",i,s;r+='<a href="',(i=n.viewAll)?i=i.call(e,{hash:{},data:t}):(i=e.viewAll,i=typeof i===u?i.apply(e):i),r+=a(i)+'" class="view-more-link"',i=n["if"].call(e,e.viewAllDataTrack,{hash:{},inverse:f.noop,fn:f.program(4,d,t),data:t});if(i||i===0)r+=i;return r+=">",s={hash:{intlName:"search.VIEW_ALL_COUNT",count:e.total},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</a>",r}function d(e,t){var r="",i;return r+=' data-track="',(i=n.viewAllDataTrack)?i=i.call(e,{hash:{},data:t}):(i=e.viewAllDataTrack,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function v(e,t){return'<div class="flickr-dots inline"></div>'}function m(e,t){var r="",i;return r+='\n		<div style="height: ',(i=n.placeholderHeight)?i=i.call(e,{hash:{},data:t}):(i=e.placeholderHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+'px;"></div>\n	',r}function g(e,t){var r="",i,s;return r+="\n		",s={hash:{},data:t},r+=a((i=n.outlet||e.outlet,i?i.call(e,e["photo-list-view"],s):l.call(e,"outlet",e["photo-list-view"],s)))+"\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;o=n.unless.call(t,t.emptySearch,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-photos-single-row",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-lite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{update:e.PhotoModelHelper.updateEngagement},toggleFave:e.PhotoModelHelper.toggleFave,addAsFave:e.PhotoModelHelper.addAsFave,getLargestSize:e.PhotoModelHelper.getLargestSize,getSizeToFit:e.PhotoModelHelper.getSizeToFit,getSizeIfExact:e.PhotoModelHelper.getSizeIfExact,isSizeSquare:e.PhotoModelHelper.isSizeSquare,isPhotoSquare:e.PhotoModelHelper.isPhotoSquare,attributes:{owner:{readOnly:!0,isModel:!0,getter:function(e,t){var n=this;return{id:n.getValue(t,"ownerNsid"),getValue:function(e){return e==="id"?n.getValue(t,"ownerNsid"):e==="nsid"?n.getValue(t,"ownerNsid"):e==="url"?n.getValue(t,"ownerUrl"):n.getValue(t,e)},toJSON:function(){return{id:n.getValue(t,"ownerNsid"),url:n.getValue(t,"ownerUrl"),pathAlias:n.getValue(t,"pathAlias"),username:n.getValue(t,"username"),realname:n.getValue(t,"realname"),displayname:n.getValue(t,"displayname"),nsid:n.getValue(t,"ownerNsid"),ownerUrl:n.getValue(t,"ownerUrl"),isMe:n.getValue(t,"isMe")}},exists:function(e){return!1}}}},pathAlias:e.PersonModelHelper.attributes.pathAlias,username:e.PersonModelHelper.attributes.username,realname:e.PersonModelHelper.attributes.realname,displayname:e.PersonModelHelper.attributes.displayname,nsid:e.PersonModelHelper.attributes.nsid,ownerUrl:e.PersonModelHelper.attributes.url,isMe:e.PersonModelHelper.attributes.isMe,engagement:{readOnly:!0,isModel:!0,getter:function(e,t){var n=this;return{getValue:function(e){return n.getValue(t,e)},toJSON:function(){return{ownerNsid:n.getValue(t,"ownerNsid"),isFaved:n.getValue(t,"isFaved"),faveCount:n.getValue(t,"faveCount"),commentCount:n.getValue(t,"commentCount"),canFave:n.getValue(t,"canFave")}},exists:function(e){return!1}}}},curation:{readOnly:!0,isModel:!0,getter:function(e,t){var n=this;return{getValue:function(e){return n.getValue(t,e)},toJSON:function(){return{is3MP:n.getValue(t,"is3MP"),ownerCountryApproved:n.getValue(t,"ownerCountryApproved"),ownerFollowedByCurators:n.getValue(t,"ownerFollowedByCurators"),ownerAdded:n.getValue(t,"ownerAdded"),ownerPassedOver:n.getValue(t,"ownerPassedOver"),statusColor:n.getValue(t,"statusColor")}},exists:function(e){return!1}}}},ownerNsid:e.PhotoModelHelper.attributes.ownerNsid,isFaved:e.PhotoModelHelper.attributes.isFaved,faveCount:e.PhotoModelHelper.attributes.faveCount,commentCount:e.PhotoModelHelper.attributes.commentCount,canFave:e.PhotoModelHelper.attributes.canFave,is3MP:e.PhotoModelHelper.attributes.is3MP,ownerCountryApproved:e.PhotoModelHelper.attributes.ownerCountryApproved,ownerFollowedByCurators:e.PhotoModelHelper.attributes.ownerFollowedByCurators,ownerAdded:e.PhotoModelHelper.attributes.ownerAdded,ownerPassedOver:e.PhotoModelHelper.attributes.ownerPassedOver,statusColor:e.PhotoModelHelper.attributes.statusColor,title:e.PhotoModelHelper.attributes.title,description:e.PhotoModelHelper.attributes.description,mediaType:e.PhotoModelHelper.attributes.mediaType,license:e.PhotoModelHelper.attributes.license,isVideo:e.PhotoModelHelper.attributes.isVideo,isOwner:e.PhotoModelHelper.attributes.isOwner,sizes:e.PhotoModelHelper.attributes.sizes,descendingSizes:e.PhotoModelHelper.attributes.descendingSizes,ascendingSizes:e.PhotoModelHelper.attributes.ascendingSizes,aspectRatio:e.PhotoModelHelper.attributes.aspectRatio,needsInterstitial:e.PhotoModelHelper.attributes.needsInterstitial,canComment:e.PhotoModelHelper.attributes.canComment,url:e.PhotoModelHelper.attributes.url,rotation:e.PhotoModelHelper.attributes.rotation,isMarketplaceLicensable:e.PhotoModelHelper.attributes.isMarketplaceLicensable,marketplaceLicensingUrl:e.PhotoModelHelper.attributes.marketplaceLicensingUrl,oWidth:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},oHeight:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},hasInvalidColorspaceForPrint:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},isMarketplacePrintable:{defaultFn:function(e){return!1}}}})},"@VERSION@",{requires:["flickr-model-registry","photo-model-helper","person-model-helper","flickr-favorites-add-updater","flickr-favorites-remove-updater","photo-models","photo-engagement-models","person-models"]});
YUI.add("search-photos-lite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return t.getPhotoLiteModels=!0,e.ListFetchers["flickr-photos-search"].run(t,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{fetchParams:{getPhotoLiteModels:!0},listFetcher:e.ListFetchers["flickr-photos-search"],listItemIdField:"photoId"}},totalItems:{setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},apiParams:{writeOnce:"initOnly"},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-search-fetcher","attribute-helpers"]});
YUI.add("flickr-photos-search-fetcher",function(e,t){"use strict";function r(t,n){var r=e.merge(e.SearchHelper.UNIFIED_DEFAULT_PARAMS,{extras:e.APIHelper.request[t.getPhotoLiteModels?"getRebootPhotoLiteExtras":"getRebootPhotoExtras"](),per_page:t.perPage||50,page:t.page||"1",lang:t.lang}),i;return t.fetchGeo&&(r.extras+=",geo"),n.flipper.isFlipped("display-marketplace-licensable")&&(r.extras+=",is_marketplace_licensable"),t.additionalExtras&&(r.extras+=","+t.additionalExtras.join(",")),i=e.merge(r,t.apiParams||{}),YUI.Env.isServer&&e.SearchHelper.unescapeParameters(i),e.SearchHelper.isParameterlessSearch(i)?null:i}function i(t,n){var r=t[0],i=t[1],s=t[2],o,u,a,f={id:n.id||e.SearchUrl.EMPTY_SEARCH_ID,apiParams:{},emptyQuery:!!n.emptyQuery,photos:[]},l,c,h;n.id&&n.id!==e.SearchUrl.EMPTY_SEARCH_ID&&(f.apiParams=e.QueryString.parse(n.id));if(!n.id)throw new ReferenceError("No `id` provided by request.");if(!n.useV2API&&(!r.photos||!r.photos.photo)||n.useV2API&&r.body.length<1)throw new Error("No `photos.photo` property returned by API.");var p=n.useV2API?r.body:r.photos.photo;return n.getPhotoLiteModels?a=p.map(function(t){return c=e.APIHelper.response.parsePhotoLite(t),s.addOrUpdate(c)}):(a=e.APIHelper.response.parsePhotos({photos:r.photos.photo,photoModelRegistry:s,personModelRegistry:t[3],photoEngagementModelRegistry:t[4],photoStatsModelRegistry:t[5],photoCurationModelRegistry:t[6]}),n.fetchGeo&&(o=t[6],r.photos.photo.forEach(function(e){typeof e.latitude!="undefined"?l={id:e.id,hasGeo:!0,latitude:e.latitude,longitude:e.longitude}:l={id:e.id,hasGeo:!1},o.addOrUpdate(l)}))),f.photos={perPage:n.useV2API?n.perPage:r.photos.perpage,page:n.useV2API?n.page:r.photos.page,pageContent:a,totalItems:n.useV2API?parseInt(r.headers.totalCount,10):parseInt(r.photos.total,10),totalPages:n.useV2API?parseInt(r.headers.totalCount,10)/n.perPage:r.photos.pages},!n.useV2API&&r.photos.maxAllowedResults&&(f.photos.totalItems=Math.min(r.photos.maxAllowedResults,parseInt(r.photos.total,10))),!n.useV2API&&r.photos.maxAllowedPages&&(f.photos.totalPages=Math.min(r.photos.maxAllowedPages,r.photos.pages)),f.totalItems=n.useV2API?parseInt(r.headers.totalCount,10):parseInt(r.photos.total,10),i.exists(f.id)?(u=i.getValue(f.id,"photos").getList(),h=u.filter(function(e){return!!e}).reduce(function(e,t){return e[t.id]=!0,e},{}),f.photos.pageContent=f.photos.pageContent.filter(function(e){return!h[e.id]}),f.photos.page===1&&(f.photos.forceAppend=!0),i.addOrUpdate(f)):i.add(f),a}function s(r,i){var s=this,o="flickr.photos.search",u=r.emptyQuery?{}:this._processParams(e.merge({lang:i.lang||e.config.lang},r),i),a;u||(r.emptyQuery=!0);if(r.useV2API){var f=new n({api_key:e.config.flickr.api.site_key});a=[f.media().search(r.apiParams.text).get({pageNumber:r.page,pageSize:r.perPage})]}else a=[r.emptyQuery?e.Promise.resolve({photos:{photo:[]}}):i.callAPI(o,u)];return r.getPhotoLiteModels?a=a.concat([i.getModelRegistry("search-photos-lite-models"),i.getModelRegistry("photo-lite-models")]):a=a.concat([i.getModelRegistry("search-photos-models"),i.getModelRegistry("photo-models"),i.getModelRegistry("person-models"),i.getModelRegistry("photo-engagement-models"),i.getModelRegistry("photo-stats-models"),i.getModelRegistry("photo-geo-models"),i.getModelRegistry("photo-curation-models")]),e.Promise.all(a).then(function(e){return s._processResponse(e,r)},e.FetcherErrorLogger(t))}var n=require("flickr-js-sdk");e.namespace("ListFetchers")["flickr-photos-search"]={run:s,_processParams:r,_processResponse:i}},"@VERSION@",{requires:["flickr-promise","search-helper","search-url","api-helper","querystring-parse-simple"],optional:["search-photos-models","search-photos-lite-models","photo-models","photo-lite-models","person-models","photo-engagement-models","photo-stats-models","photo-curation-models","photo-geo-models"],optionalRequires:["flickr-js-sdk"]});
YUI.add("search-photos-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-photos-search"].run(t,this.appContext)}},attributes:{photos:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-photos-search"],listItemIdField:"photoId"}},totalItems:{setter:function(t){return t=e.AttributeHelpers.coerceInteger(t),t<0&&(t=0),t},defaultValue:0},apiParams:{writeOnce:"initOnly"},emptyQuery:{defaultValue:!1}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-photos-search-fetcher"]});
YUI.add("photo-selector-limited-rows-photolist-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return t.photolistViewClasses&&(t.additionalViewClasses=t.photolistViewClasses),t.photoListConfig=e.merge(t.primaryPhotoListConfig),this.searchUrl=t.searchUrl,this.listId=t.listId,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){return this.appContext.getModel("search-photos-lite-models",this.searchUrl.getId(),{}).then(function(e){this.searchModel=e,e.getValue("totalItems")<=0&&this.set("emptySearch",!0)}.bind(this))},buildContainer:function(){var e="search.YOUR_PHOTOS";return this.listId==="contacts"?e="search.FROM_YOUR_CONTACTS":this.listId==="everyone"&&(e="search.EVERYONES_PHOTOS"),this.setContainerHTML(this.templates("search-photos-single-row")({emptySearch:this.get("emptySearch"),total:this.searchModel.getValue("totalItems"),singleResult:this.searchModel.getValue("totalItems")===1,viewAll:"#"+this.listId,"photo-list-view":this.subviews["photo-list-view"].get("container"),title:this.intlMessage({intlName:e})})),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.handleClick.bind(this))),this},handleClick:function(e){e.halt();var t=e.target,n;t.hasClass("view-more-link")&&(n=t.getDOMNode().href.split("#")[1],this.fire("subviewViewEvent","viewEntireSearchList",{list:n,searchUrl:this.searchUrl}))}},{ATTRS:{emptySearch:{value:!1}}})},"@VERSION@",{requires:["flickr-view","photo-list-view","hermes-template-search-photos-single-row","search-photos-lite-models","photo-selector-css"],langBundles:["common","search"]});
YUI.add("hermes-template-photo-selector-photo-list-photo-interaction",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='<a href="'+f((i=(i=(i=e.photo,i==null||i===!1?i:i.owner),i==null||i===!1?i:i.url),typeof i===a?i.apply(e):i))+'" class="attribution">',s={hash:{intlName:"common.BY_USER",user:(i=(i=e.photo,i==null||i===!1?i:i.owner),i==null||i===!1?i:i.displayname)},data:t},r+=f((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+"</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;s+='\n<div class="photo-list-photo-interaction">\n	<div class="square"></div>\n	<div class="interaction-bar">\n		<div class="text">\n			<a href="',(o=n.photoPageUrl)?o=o.call(t,{hash:{},data:i}):(o=t.photoPageUrl,o=typeof o===a?o.apply(t):o),s+=f(o)+'" class="title">'+f((o=(o=t.photo,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+"</a>\n			",u=n["if"].call(t,(o=(o=t.photo,o==null||o===!1?o:o.owner),o==null||o===!1?o:o.displayname),{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector-photo-list-photo-interaction",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-selector-photolist-interaction-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e=this.get("model");return this.setContainerHTML(this.templates("photo-selector-photo-list-photo-interaction")({photo:e.toJSON(),photoPageUrl:this.get("photoPageUrl")})),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectPhoto.bind(this))),this.registerEventHandler(e.on("photoSelector:subviewEvent",this.handleOtherPhotoSelected,this)),this.get("isActive")||this.get("container").removeClass("active"),this},selectPhoto:function(t){t.halt(),this.set("isActive",!0),this.get("container").addClass("active"),e.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")})},handleOtherPhotoSelected:function(e){if(e.eventName==="selectPhotoFromPhotoList"&&this.get("isActive")){if(e.id===this.get("id"))return;this.set("isActive",!1),this.get("container")._node&&this.get("container").removeClass("active")}}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,n){return t.photoId(e)}},model:{writeOnce:"initOnly"},photoPageUrl:{writeOnce:"initOnly"}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-photo-list-photo-interaction","photo-list-photo-interaction-css","attribute-helpers"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-photo-selector-sets-photolist-set-interaction",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='\n<div class="photo-list-album-interaction photo-selector-album dark">\n	<div class="interaction-bar">\n		<h4 class="album-title">'+f((o=(o=t.album,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+'</h4>\n		<span class="album-photo-count">',u={hash:{intlName:"models.PLURAL_PHOTOS",count:(o=t.album,o==null||o===!1?o:o.totalCount)},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+"</span>\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector-sets-photolist-set-interaction",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-selector-sets-photolist-interaction-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){return this.appContext.getModel(this.get("engagementModelName"),this.get("id")).then(function(e){this.set("engagement",e)}.bind(this))},buildContainer:function(){return this.setContainerHTML(this.templates("photo-selector-sets-photolist-set-interaction")({album:this.get("model").toJSON(),albumPageUrl:this.get("albumPageUrl")})),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectSet.bind(this))),this},selectSet:function(t){t.halt(),e.fire("photoSelector:subviewEvent",{eventName:"selectSetFromPhotoList",id:this.get("id"),title:this.get("model").getValue("title")})},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,n){return t.photoId(e)}},model:{writeOnce:"initOnly"},albumPageUrl:{writeOnce:"initOnly"},engagement:{value:null},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(t,n){return e.AttributeHelpers.validateString(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-sets-photolist-set-interaction","photo-list-album-interaction-css","attribute-helpers"],optionalRequires:["fluid"],langBundles:["models"]});
YUI.add("photo-selector-view",function(e){var t=150,n=200,r={};r={horizontal:20,vertical:20},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").getHTML()===""&&this.setContainerHTML(this.templates("flickr-balls")({})),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=e.publicOnlyGroups,this.isUploading=!1,this},loadState:function(){var t={photostreamModel:this.appContext.getModel("photostream-models",this.appContext.getViewer().nsid),setsModel:this.appContext.getModel("sets-models",this.appContext.getViewer().nsid)};return this.get("enableMarketplaceProducts")&&(t.marketplaceCategoryListModel=this.appContext.getModel("marketplace-categories-list-models",1)),(new e.FlickrPromise(t)).then(function(t){this.set("photostreamModel",t.photostreamModel),this.set("setsModel",t.setsModel),this.get("enableMarketplaceProducts")&&this.set("marketplaceCategoryListModel",t.marketplaceCategoryListModel);if(this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(e){this.set("groupModel",e)}.bind(this),function(t){e.Flog.error(this.name,"error loading group model",t)}.bind(this))}.bind(this))},moveElementToFirstInArray:function(e,t,n){var r;return e.forEach(function(e,i){e[n]===t&&(r=i)}),e.unshift(e.splice(r,1)[0]),e},buildContainer:function(){var e,t,n=[];return this.get("enableMarketplaceProducts")&&(n=this.get("marketplaceCategoryListModel").getValue("categories").toJSON()),t={hasUploadCapabilities:this.get("hasUploadCapabilities"),enableMarketplaceProducts:this.get("enableMarketplaceProducts"),marketplaceCategories:n,searchable:this.get("searchable"),hasGroupCapabilities:this.get("groupId")},e=this.templates("photo-selector")(t),this.setContainerHTML(e),this},loadPhotoList:function(n,i){var s=this,o=this.get("container"),u=o.one(".photo-selector-photos-wrapper"),a;this.photoListView&&this.photoListView.destroy(),i||(i=!1),a={modelParams:n,parentName:this.name,paginateOnScroll:!0,parentContainer:u,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:t,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:r,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:u.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:o.one(".photo-selector-photos-container")}).then(function(t){return t.initialize().then(function(t){var n,r=o.one(".photo-selector-photos-container .photo-list-view");u.getDOMNode().scrollTop=0,s.photoListView=t,o.one(".loader").addClass("loaded"),i&&!r.hasChildNodes()&&(n=e.Node.create('<p class="no-results">'+s.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"),r.empty().append(n)),s.set("selected",null),e.fire("photoSelector:unselected")})},function(t){e.Flog.error("[photo-selector-view] Error getting view ("+t+")")})},loadGroupPhotoList:function(n){var i=this,s=this.get("container"),o=s.one(".group-photo-selector-photos-wrapper"),u;this.photoListView&&this.photoListView.destroy(),u={modelParams:n,parentName:this.name,paginateOnScroll:!0,parentContainer:o,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(u.itemFilterFunction=this.get("itemFilterFunction")),u.layout={targetRowHeight:t,containerWidth:u.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:r,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:o.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=u,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,primaryPhotoListConfig:u,isActiveViewAgnostic:!0,container:o}).then(function(t){return t.initialize().then(function(t){var n,r=s.one(".group-photo-selector-photos-container .photo-list-view");o.getDOMNode().scrollTop=0,i.photoListView=t,s.one(".loader").addClass("loaded"),r.hasChildNodes()||(n=e.Node.create('<p class="no-results">'+i.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),r.empty().append(n)),i.set("selected",null),e.fire("photoSelector:unselected")})},function(t){e.Flog.error("[photo-selector-view] Error getting view ("+t+")")})},loadSetsPhotoList:function(t){var i=this,s=this.get("container"),o;this.photoListView&&this.photoListView.destroy(),o={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:s.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"},o.layout={targetRowHeight:n,containerWidth:o.parentContainer.get("offsetWidth"),containerPadding:{top:14,right:0,bottom:14,left:0},itemSpacing:r,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:s.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=o,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,primaryPhotoListConfig:o,isActiveViewAgnostic:!0,container:s.one(".photo-selector-photos-container")}).then(function(t){return t.initialize().then(function(t){s.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,i.photoListView=t,s.one(".loader").addClass("loaded"),i.set("selected",null),e.fire("photoSelector:unselected")})},function(t){e.Flog.error("[photo-selector-view] Error getting view ("+t+")")})},loadSearchPhotoList:function(n){var i=this,s=this.get("container"),o,u=n.photoListContainerSelector?s.one(n.photoListContainerSelector
):s.one(".photo-selector-photos-container"),a=n.parentContainerSelector?s.one(n.parentContainerSelector):s.one(".photo-selector-photos-wrapper"),f=n.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[n.listId]&&this.searchPhotoListViews[n.listId].destroy(),o={modelParams:n.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:a,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(o.itemFilterFunction=this.get("itemFilterFunction")),o.layout={targetRowHeight:t,containerWidth:o.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:r,forceAspectRatio:1,maxNumRows:n.maxNumRows?n.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:n.alwaysDisplayOrphans?n.alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=o,this.appContext.getView(f,{appContext:this.appContext,primaryPhotoListConfig:o,isActiveViewAgnostic:!0,container:u,searchUrl:n.searchUrl,listId:n.listId}).then(function(t){return t.initialize().then(function(t){i.registerEventHandler(t.on("subviewViewEvent",i.handleSubviewEvent,i)),s.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,n.parentContainerSelector&&(s.one(n.parentContainerSelector).getDOMNode().scrollTop=0),i.searchPhotoListViews[n.listId]=t,s.one(".loader").addClass("loaded"),i.set("selected",null),e.fire("photoSelector:unselected")})},function(t){e.Flog.error("[photo-selector-view] Error getting view ("+t+")")})},activate:function(){var t=this.get("container"),n,r=this.get("defaultSelected");return this.registerEventHandler(e.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),this.registerEventHandler(t.on("click",this.handleClick,this)),this.get("hasUploadCapabilities")&&this.registerEventHandler(t.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(e.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),r?(r.type==="marketplace"&&(r.id===0||r.id==="0"?n={registryName:"marketplace-creativeCommons-photos-models",modelIdOrAttributes:1,collectionAttributeName:"photos"}:n={registryName:"marketplace-category-photos-models",modelIdOrAttributes:r.id,collectionAttributeName:"photos"},this.toggleSelector(),this.loadPhotoList(n),this.toggleTitleBar(r.title,"marketplace")),r.type==="group"?(n={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(n.fetchParams={privacyFilter:1},n.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(n),this.toggleTitleBar(r.title,"group")):(n={registryName:"set-models",modelIdOrAttributes:r.id,collectionAttributeName:"photoPageList"},this.loadPhotoList(n),this.toggleTitleBar(r.title,"set"))):this.get("photostreamModel").getValue("totalItems")===0?this.toggleUploader():(n={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList"},this.loadPhotoList(n,"photostream")),this},toggleUploader:function(){this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".marketplace-category-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleSelector:function(){this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".marketplace-category-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleMarketplaceCategorySelector:function(){this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".marketplace-category-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleSearchListsSelector:function(){this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".marketplace-category-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var e=this.get("container").one(".photo-selector-upload");e&&e.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".marketplace-category-wrapper").addClass("is-hiding"),this.get("container"
).one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(t,n,r){var i=this.get("container"),s=i.one(".photo-selector-title-bar"),o=s.one(".back-to-list"),u="";typeof r=="undefined"&&(r=!0),n==="search"&&(t='"'+t+'"'),n==="marketplace"?u=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_CATEGORY_LIST"}):n==="set"?u=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):n==="search"&&(u=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),r?o.removeClass("hidden"):o.addClass("hidden"),o.set("text",u),s.one(".title").set("text",e.Handlebars.helpers.truncate(t,120)),s.removeClass("hidden"),i.one(".photo-selector-photos-wrapper").addClass("showing-title"),i.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),i.one(".marketplace-category-wrapper").addClass("showing-title"),this.get("groupId")&&i.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var e=this.get("container"),t=e.one(".photo-selector-title-bar");t.addClass("hidden"),e.one(".photo-selector-photos-wrapper").removeClass("showing-title"),e.one(".marketplace-category-wrapper").removeClass("showing-title"),this.get("groupId")&&e.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},onParentViewEvent:function(t,n){var r=n[1],i,s,o={},u=this.get("searchable"),a;n[0]==="navigation"?(i=r.target._node.dataset.value,i==="upload"?(this.get("hasUploadCapabilities")&&this.toggleUploader(),this.get("fileDragDrop")?this.get("fileDragDrop").reset():(this.set("fileDragDrop",new e.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this))):(this.get("hasUploadCapabilities")&&this.toggleSelector(),i==="marketplace"?this.toggleMarketplaceCategorySelector():i==="group"?(s={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(s.fetchParams={privacyFilter:1},s.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(s)):i==="photostream"?(s={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList"},this.loadPhotoList(s)):i==="sets"&&(s={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(s)),this.hideTitleBar())):n[0]==="search"&&(a=new e.SearchUrl(r.apiParams,this.appContext),this.toggleSearchListsSelector(),u.yours&&(this.searchUrlYourPhotos=new e.SearchUrl(r.apiParams,this.appContext),this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),!u.contacts&&!u.everyone?(this.toggleSelector(),s={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims","is_marketplace_printable","has_invalid_colorspace_for_print"]}},this.loadPhotoList(s,!0)):(o.listId="yours",o.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-yours",o.maxNumRows=1,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlYourPhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.loadSearchPhotoList(o))),u.contacts&&(this.searchUrlContactsPhotos=new e.SearchUrl(r.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),o.listId="contacts",o.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-contacts",o.maxNumRows=1,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlContactsPhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(o)),u.everyone&&(this.searchUrlEveryonePhotos=new e.SearchUrl(r.apiParams,this.appContext),o.listId="everyone",o.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",o.parentContainerSelector=".photo-selector-search-list-everyone",o.maxNumRows=1,o.alwaysDisplayOrphans=!0,o.searchUrl=this.searchUrlEveryonePhotos,o.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:r.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(o)),u.marketplace,this.toggleTitleBar(a.getAPIParams().text,"search",!1))},handleSubviewEvent:function(t){var n,r,i;if(t.eventName==="selectPhotoFromPhotoList")return n={photoModel:this.appContext.getModel("photo-models",t.id)},(new e.FlickrPromise(n)).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),e.fire("photoSelector:selected",{hasWarning:!1,photoId:t.photoModel.id}),this.set("selected",t.photoModel.id)}.bind(this));t.eventName==="selectSetFromPhotoList"?(r={registryName:"set-models",modelIdOrAttributes:t.id,collectionAttributeName:"photoPageList"},this.loadPhotoList(r),this.toggleTitleBar(t.title,"set")):t.details&&t.details[0]==="viewEntireSearchList"&&(r={registryName:"search-photos-lite-models",modelIdOrAttributes:t.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:t.details[1].searchUrl.getAPIParams()}},this.toggleSelector(),this.loadPhotoList(r),i="search.YOUR_PHOTOS"
,t.details[1].list==="contacts"?i="search.FROM_YOUR_CONTACTS":t.details[1].list==="everyone"&&(i="search.EVERYONES_PHOTOS"),i=this.intlMessage({intlName:i}),this.toggleTitleBar(i+": "+t.details[1].searchUrl.getAPIParams().text,"search"))},handleClick:function(e){var t=e.target,n,r;if(this.isUploading)return;t.hasClass("marketplace-category")||t.hasClass("creative-commons-category")?(n=t.getData("value"),n===this.get("categoryIdCreativeCommons")||n===this.get("categoryIdNasa")?this.set("photoSource",this.get("photoSourceCreativeCommons")):this.set("photoSource",this.get("photoSourceMarketplace")),n===0||n==="0"?r={registryName:"marketplace-creativeCommons-photos-models",modelIdOrAttributes:1,collectionAttributeName:"photos"}:r={registryName:"marketplace-category-photos-models",modelIdOrAttributes:n,collectionAttributeName:"photos"},this.toggleSelector(),this.loadPhotoList(r),this.toggleTitleBar(t.getData("title"),"marketplace")):t.hasClass("back-to-list")?this.fire("subviewViewEvent","backToList"):t.hasClass("simulate-file-select")&&(e.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click())},handleSelectPhoto:function(t){var n;n={photoModel:this.appContext.getModel("photo-models",t.getData("photo-id"))};if(t.hasClass("invalid"))return;return this.set("photoSource",this.get("photoSourceOwnImage")),(new e.FlickrPromise(n)).then(function(t){e.fire("photoSelector:selected",{hasWarning:!1,photoId:t.photoModel.id}),this.set("selected",t.photoModel.id)}.bind(this))},handlePhotoSetSelector:function(e){var t;this.get("hasUploadCapabilities")&&this.toggleSelector(),t={registryName:"set-models",modelIdOrAttributes:e,collectionAttributeName:"photoPageList"},this.loadPhotoList(t)},handlePhotoUploaded:function(e){this.appContext.getModelRegistry("photostream-models").then(function(t){t.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach(function(e){t.remove(e)}),this.set("selected",e.id),this.fire("actionClick",e),this.resetUploader()}.bind(this),function(e){this.appContext.err(e)}.bind(this))},handleFileSelect:function(e){var t;t=e.target.getDOMNode().files[0],t&&t.name&&this.uploadFile(t)},pollTicket:function(t){var n;if(!this.uploadTimer)this.uploadTimer=e.moment();else{n=e.moment().diff(this.uploadTimer,"seconds");if(n>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:t}).then(function(e){var n;e&&e.stat&&(e.stat!=="ok"&&this.showUploadError("GENERIC"),e.uploader&&e.uploader.ticket instanceof Array&&(n=e.uploader.ticket[0],n&&n.id===t&&(n.complete===1?this.appContext.getModel("photo-models",n.photoid).then(this.handlePhotoUploaded.bind(this),function(e){this.showUploadError("GENERIC")}):n.complete===2?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(t)}.bind(this),1e3))))}.bind(this),function(e){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=undefined},uploadFile:function(t){var n=new FormData,r,i=e.config.flickr.api.hostname_client_upload,s,o;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,n.append("api_key",e.config.flickr.api.site_key),n.append("csrf",e.config.flickr.csrf.token),n.append("photo",t,t.name),n.append("async","1"),n.append("is_public","0"),n.append("is_friend","0"),n.append("is_family","0"),n.append("content_type","1"),r=this._imgFileXhr=new XMLHttpRequest,r.open("POST",i,!0),r.withCredentials=!0,s=function(t){var n=typeof t=="object"?t.target.statusText:t+"";e.Flog.error("[photo-selector] Error during upload ("+n+")"),this.resetUploader(),this.showUploadError("GENERIC")},o=function(t){var n,r,i,o;try{o=e.one(t.currentTarget.responseXML),r=o.one("rsp").getAttribute("stat")}catch(u){r="",n=""}return r!=="ok"?s((r||"empty")+": "+(n||"no message")):(i=o.one("ticketid").get("text"),this.pollTicket(i))},r.addEventListener("load",o.bind(this)),r.addEventListener("error",s.bind(this)),r.send(n)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(e){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[e]})),this.get("fileDragDrop").showError()},handleFileDrop:function(e){if(this.isUploading)return;e instanceof Error?this.showUploadError(e.message):this.uploadFile(e)},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},categoryIdCreativeCommons:{readOnly:!0,value:"101"},categoryIdNasa:{readOnly:!0,value:"102"},categoryIdAbstract:{readOnly:!0,value:"1"},photoSourceOwnImage:{readOnly:!0,value:1},photoSourceCreativeCommons:{readOnly:!0,value:2},photoSourceMarketplace:{readOnly:!0,value:3},enableMarketplaceProducts:{value:!0,setter:function(e){return e}},isCreativeCommonsWallartEnabled:{value:!1,setter:function(e){return this.appContext.flipper.isFlipped("creative-commons-wallart")?e:!1}},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0,marketplace:!1}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName
:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(e){return!e.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","util-css","flickrui-css","fluid-balls-css","photo-selector-css","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view","flog"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups"]});
YUI.add("hermes-lang-wallart_fr-fr",function(e,t){e.Intl.add("hermes/wallart","fr-FR",{WALL_ART:["D\u00e9coration murale"],YOU_CANCELLED_THIS_ITEM_ON_DATE:["Vous avez annul\u00e9 la commande de cet article le ",{type:"date",valueName:"date",format:"monthYear"}],YOU_ORDERED_THIS_ITEM_ON_DATE:["Vous avez command\u00e9 cet article le ",{type:"date",valueName:"date",format:"monthYear"}],RETURN_TO_YOUR_ORDER_HISTORY:["Revenir \u00e0 l\u2019historique de vos commandes"],SELECT_A_PHOTO:["S\u00e9lectionnez une photo"],SELECT_PRODUCT:["S\u00e9lectionner un produit"],PHOTO_MOUNT:["Montage photo"],CANVAS:["Ch\u00e2ssis"],CANVAS_WRAP:["Montage sur ch\u00e2ssis"],PREMIUM_LUSTRE:["Tr\u00e8s brillant"],GLOSSY:["Brillant"],MATTE:["Mat"],SIZE:["Taille"],CHECKOUT:["Passer la commande"],REORDER:["Commander de nouveau"],TOTAL:["Total"],UPLOAD:["Importez"],CURATED_COLLECTIONS:["Collections de nos \u00e9diteurs"],CREATIVE_COMMONS:["Creative Commons"],NASA:["NASA"],ABSTRACT:["Abstrait"],ANIMALS:["Animaux"],PATTERNS:["Motifs"],FOOD:["Cuisine"],LANDSCAPES:["Paysages"],TRAVEL:["Voyage"],MY_ALBUMS:["Mes albums"],PRODUCT_DROPUP_CANVAS:["Ch\u00e2ssis artistique sur cadre en bois de 3,80\u00a0cm"],PRODUCT_DROPUP_MOUNTED:["Impression sur papier photo permanent, bord en texture bois de 2,50\u00a0cm"],MATERIAL_DROPUP_LUSTRE:["Papier permanent Crystal professionnel - Tr\u00e8s brillant"],MATERIAL_DROPUP_GLOSSY:["Papier permanent Crystal professionnel - Brillant"],MATERIAL_DROPUP_MATTE:["Papier permanent Crystal professionnel - Mat"],SIZES_MODAL_SIZES_NOT_AVAILABLE:["Certains formats ne sont pas disponibles en raison de la r\u00e9solution de la photo. En savoir plus."],MOUNTED_SAFE_AREA:["La zone \u00e0 l'ext\u00e9rieur de la ligne pleine ne sera pas imprim\u00e9e. <br>La zone \u00e0 l'int\u00e9rieur de la ligne sera imprim\u00e9e correctement."],CANVAS_SAFE_AREA:["La zone \u00e0 l'ext\u00e9rieur de la ligne en pointill\u00e9 sera imprim\u00e9e sur le champ. <br>La zone \u00e0 l'int\u00e9rieur de la ligne sera imprim\u00e9e sera imprim\u00e9e sur la face avant."],SAVING:["Enregistrement en cours..."],SAVED:["Toutes les modifications sont enregistr\u00e9es"],WITH_CODE:["avec le code\u00a0:"],FREE_SHIPPING_WITH_CODE:["Livraison gratuite avec le code\u00a0:"],PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10:["Ch\u00e2ssis 20,3\u00a0x\u00a025,40\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8:["Ch\u00e2ssis 25,40\u00a0x\u00a020,30\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12:["Ch\u00e2ssis 30,5\u00a0x\u00a030,5\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14:["Ch\u00e2ssis 28\u00a0x\u00a035,5\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11:["Ch\u00e2ssis 35,56\u00a0x\u00a027,94\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20:["Ch\u00e2ssis 40,6\u00a0x\u00a050,8\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16:["Ch\u00e2ssis 50,80\u00a0x\u00a040,64\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24:["Ch\u00e2ssis 50,8\u00a0x\u00a061\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20:["Ch\u00e2ssis 60,96\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30:["Ch\u00e2ssis 50,8\u00a0x\u00a076,2\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20:["Ch\u00e2ssis 76,20\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_CANVAS_PART_2:["Barres de montage de 3,20\u00a0cm<br>Montant r\u00e9sistant<br>Comprend le mat\u00e9riel n\u00e9cessaire pour l'accrocher au mur"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10:["Impression sur cadre 20,3\u00a0x\u00a025,40\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8:["Impression sur cadre 25,40\u00a0x\u00a020,32\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12:["Impression sur cadre 30,5\u00a0x\u00a030,5\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14:["Impression sur cadre 28\u00a0x\u00a035,5\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11:["Impression sur cadre 35,56\u00a0x\u00a027,94\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20:["Impression sur cadre 40,6\u00a0x\u00a050,8\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16:["Impression sur cadre 50,80\u00a0x\u00a040,64\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30:["Impression sur cadre 50,8\u00a0x\u00a076,2\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20:["Impression sur cadre 76,20\u00a0x\u00a050,80\u00a0cm"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE:["Finition mate<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY:["Finition brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE:["Finition tr\u00e8s brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND:["Finition mate<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND:["Finition brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND:["Finition tr\u00e8s brillante<br>Bord en texture bois de 2,50\u00a0cm<br>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre"],PHOTO_TOO_SMALL_IN_SELECTED_SIZE:['Cette photo est trop petite pour \u00eatre imprim\u00e9e au format s\u00e9lectionn\u00e9. Nous allons rechercher automatiquement le meilleur format le plus approchant. <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">En savoir plus.</a>'],BAD_SIZES:['Certains formats ne sont pas disponibles en raison de la r\u00e9solution de la photo. <a target="_blank" href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">En savoir plus</a>'],NOT_AVAILABLE:["Non disponible en raison de la r\u00e9solution de la photo"
],UPLOADR_ERROR_MESSAGE_GENERIC:["Un probl\u00e8me est survenu lors de l'importation de votre photo. Veuillez r\u00e9essayer."],UPLOADR_ERROR_MESSAGE_FILE_TYPE:["Apparemment, le type du fichier de la photo est incorrect. Importez une photo au format PNG ou JPG."],UPLOADR_ERROR_MESSAGE_FILE_SIZE:["Apparemment, la photo \u00e0 importer est trop volumineuse. La taille maximale des photos pouvant \u00eatre import\u00e9es est de 250\u00a0Mo."],UPLOADR_ERROR_MESSAGE_FILE_COUNT:["S\u00e9lectionnez une seule photo \u00e0 importer."],UPLOADR_ERROR_MESSAGE_LOW_QUALITY:['Apparemment, votre photo ne correspond pas aux exigences minimales d\'impression. Choisissez une photo d\'au moins 975\u00a0x\u00a0825\u00a0pixels. En savoir plus sur les <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">exigences</a> relatives aux produits imprim\u00e9s.'],UPLOADR_ERROR_MESSAGE_COLOR_SPACE:['Nous ne pouvons pas imprimer de photos avec syst\u00e8me de couleurs CMJN ou ProPhoto RVB. Nous recommandons d\'utiliser des photos avec syst\u00e8me de couleurs sRVB. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">En savoir plus</a>.'],DRAG_DROP_TO_UPLOAD:['Faites glisser votre photo pour l\'importer ou <a href="#" class="simulate-file-select">parcourez les dossiers</a>.'],PHOTOS_UPLOADED_AS_PRIVATE:['Les photos import\u00e9es seront ajout\u00e9es \u00e0 votre <a href="/me/">galerie </a> en tant que photos priv\u00e9es.'],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_CANVAS:["\u00c0 ce niveau de zoom, l'impression de votre photo sera de qualit\u00e9 m\u00e9diocre. Effectuez un zoom arri\u00e8re pour pouvoir faire cet achat."],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_MOUNTED:["\u00c0 ce niveau de zoom, l'impression de votre photo sera de qualit\u00e9 m\u00e9diocre. Effectuez un zoom arri\u00e8re pour pouvoir faire cet achat."],INITIAL_DIALOG_CANVAS_DISABLED:["Le format ch\u00e2ssis n'est pas disponible pour cette photo en raison de sa faible r\u00e9solution. Le format ch\u00e2ssis n\u00e9cessite un minimum de 975\u00a0x\u00a0825\u00a0pixels."],INITIAL_DIALOG_MOUNTED_DISABLED:["Le format montage photo n'est pas disponible pour cette photo en raison de sa faible r\u00e9solution. Le montage photo n\u00e9cessite un minimum de 1\u00a0000\u00a0x\u00a0800\u00a0pixels."],GO_BACK:["Pr\u00e9c\u00e9dent"],PHOTO_NOT_LARGE_ENOUGH_TO_ROTATE:["Cette photo n'est pas assez grande pour que son orientation puisse \u00eatre modifi\u00e9e."],CHANGE_SIZE:["Changer de format"],CHANGE_PHOTO:["Changer de photo"],CREATIONS:["Cr\u00e9ations"],VIEW_ORDER_HISTORY:["Afficher l\u2019historique des commandes"],COMPLETED:["Termin\u00e9"],IN_PROGRESS:["En cours"],CREATE_NEW:["Cr\u00e9er"],CREATIONS_EMPTY_WALLART:["Aucune d\u00e9coration murale \u00e0 afficher"],CREATIONS_EMPTY_BOOKS:["Aucun album photo \u00e0 afficher"],CREATIONS_EMPTY_TERTIARY:['Nous afficherons ici les cr\u00e9ations en cours et termin\u00e9es.<br>En savoir plus sur les <a href="/create" title="">d\u00e9corations murales</a> et les <a href="/create" title="">albums photo</a>.'],CREATIONS_NOT_ABLE_DELETE:["Nous n'avons pas pu supprimer cette cr\u00e9ation. Veuillez r\u00e9essayer ult\u00e9rieurement."],PHOTO_FOR_WALLART_DELETED:["La photo de cette d\u00e9coration murale a \u00e9t\u00e9 supprim\u00e9e"],DELETE_THIS_WALLART:["Supprimer cette d\u00e9coration murale"],REORDER_THIS_WALLART:["Commander de nouveau cette d\u00e9coration murale"],EDIT_THIS_WALLART:["Modifier cette d\u00e9coration murale"],CHANGE_PAPER:["Changer de papier"],MATERIAL_DROPUP_LUSTRE_NEW:["La finition brillante et nacr\u00e9e apporte \u00e0 votre photo une touche de r\u00e9alisme. Elle offre la saturation des couleurs de la finition brillante et la r\u00e9sistance aux traces de doigt de la finition mate."],MATERIAL_DROPUP_GLOSSY_NEW:["Finition brillante, \u00e9pur\u00e9e et avec contraste \u00e9lev\u00e9 qui am\u00e9liore la nettet\u00e9 de vos photos. Id\u00e9ale pour les photos de surfaces r\u00e9fl\u00e9chissant la lumi\u00e8re telles que l'eau, le m\u00e9tal ou le ciel."],MATERIAL_DROPUP_MATTE_NEW:["Finition mate, \u00e9l\u00e9gante et avec faible contraste qui am\u00e9liore la texture de vos photos. Parfaitement adapt\u00e9e aux photos en noir et blanc gr\u00e2ce \u00e0 sa r\u00e9sistance aux traces de doigt."],ON_SALE:["Promotion"],PRODUCT_DESCRIPTION_CANVAS_PART_2_PREVIEW:["<span>Barres de montage de 1,25\u00acpouce</span><span>Montant r\u00e9sistant</span><span>Comprend le mat\u00e9riel n\u00e9cessaire pour l'accrocher au mur</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_PREVIEW:["<span>Finition mate</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_PREVIEW:["<span>Finition brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_PREVIEW:["<span>Finition tr\u00e8s brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND_PREVIEW:["<span>Finition mate</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND_PREVIEW:["<span>Finition brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND_PREVIEW:["<span>Finition tr\u00e8s brillante</span><span>Bord en texture bois de 1\u00a0pouce</span><span>Orifices pr\u00e9-perc\u00e9s pour faciliter l'accrochage et syst\u00e8me pour poser le cadre</span>"],PHOTO_BOOK:["Livre photos"],GLOSSY_HARDCOVER_BOOK_PREMIUM_LUSTRE_PAPER
:["Livre de 11\u00a0x 8,5\u00a0pouces (28\u00a0x 21,6\u00a0cm), jaquette brillante et papier finition brillante de grande qualit\u00e9"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-fluid-modal-nav-bar",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n			",i=n.unless.call(e,e.disabled,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function c(e,t){var r="",i;r+='\n			<li data-id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'" data-value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===u?i.apply(e):i),r+=a(i)+'" class="link ',i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(3,h,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e.hiddenByDefault,{hash:{},inverse:f.noop,fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;return r+='"><a data-value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></li>\n			",r}function h(e,t){return"selected"}function p(e,t){return"hidden"}function d(e,t){return'\n			<form action="/search" method="get" role="search">\n				<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n				<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n			</form>\n		'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="fluid-modal-nav-bar">\n	<div class="fluid-modal-nav-content">\n		<ul class="links">\n		',o=n.each.call(t,t.links,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n		</ul>\n		",o=n["if"].call(t,t.enableSearch,{hash:{},inverse:f.noop,fn:f.program(7,d,i),data:i});if(o||o===0)s+=o;return s+="\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal-nav-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-nav-bar-view",function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch"),enableMarketplaceProductsSearch:this.get("enableMarketplaceProductsSearch")},this.setContainerHTML(this.templates("fluid-modal-nav-bar")(e)),this},activate:function(){var e=this.get("container"),t=this;return this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.get("links").forEach(function(n){n.selected&&t.set("currentSelection",e.one('.link[data-id="'+n.id+'"]'))}),this},deselectAll:function(){var e=this.get("container"),n=e.one(t.css.nav),r=n.one(t.css.navContent),i=r.one(t.css.links);i.all(t.css.link).removeClass("selected")},handleClick:function(t){t.halt();var n=t.target,r=n.get("parentNode"),i=this.get("container"),s,o={},u=this.appContext.getViewer().nsid;n.getDOMNode().tagName.toLowerCase()==="a"?(this.deselectAll(),r.addClass("selected"),this.set("currentSelection",r),i.one(".search-field").getDOMNode().value="",this.fire("subviewViewEvent","navigation",t)):n.hasClass("link")?(this.deselectAll(),n.addClass("selected"),this.set("currentSelection",n),i.one(".search-field").getDOMNode().value="",this.fire("subviewViewEvent","navigation",t)):this.get("enableSearch")&&(s=i.one(".search-field").getDOMNode(),n.getDOMNode().type==="submit"&&(o.apiParams={},o.apiParams[e.AttributeHelpers.coerceString(s.name)]=s.value,o.id=e.SearchHelper.generateQueryString(o.apiParams)||e.guid(),o.viewerNsid=u,this.fire("subviewViewEvent","search",o),this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:o})))},onParentViewEvent:function(t,n){var r=this.get("currentSelection");n[0]==="backToList"&&(r instanceof e.Node?this.get("currentSelection").getDOMNode().click():r.type==="search"&&this.fire("subviewViewEvent","search",r.modelParams))}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},enableMarketplaceProductsSearch:{value:!1,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-css","hermes-template-fluid-modal-nav-bar","attribute-helpers","search-helper"],langBundles:["common","wallart"],optional:["person-models","photo-models"]});
YUI.add("fluid-coverphoto-editor",function(e){"use strict";var t=768,n=2048,r;r={dragging:{mouseDownY:0,previousY:0},potential:{y:0,height:0,width:0,url:"",id:0,aspectRatio:0},original:{width:0,height:0,url:""}},e.FluidCoverPhotoEditor=function(e){this.coverPhotoElement=e,r.original.url=e.getStyle("backgroundImage")},e.FluidCoverPhotoEditor.prototype.loadCoverPhoto=function(t){var n=new Image,i=this,s,o,u;return new e.Promise(function(e,a){n.onload=function(){u=i._determineBoundaries(r.potential.height,r.potential.width),i.coverPhotoElement.setStyles({backgroundImage:"url("+n.src+")",backgroundPosition:"50% "+u.min*-1+"px"}),i.coverPhotoElement.addClass("editing"),i.setupEditorHandlers(),e()},r.potential.id=t.id,o=t.getValue("descendingSizes")[0],s=t.getValue("descendingSizes")[1],r.potential.width=s.width,r.potential.height=s.height,r.potential.url=s.url,r.original.width=o.width,r.original.height=o.height,r.potential.aspectRatio=t.getValue("aspectRatio"),n.src=s.url})},e.FluidCoverPhotoEditor.prototype._convertYPositionForApi=function(e,i){var s=parseInt(this.coverPhotoElement.get("offsetHeight"),10),o=parseInt(this.coverPhotoElement.get("offsetWidth"),10),u,a,f,l;return r.potential.aspectRatio!==r.original.width/r.original.height&&(i=r.original.height),u=Math.abs(e)+s/2,a=u*n/o,f=a-t/2,l=f*i/n,l},e.FluidCoverPhotoEditor.prototype._determineBoundaries=function(e,r){var i=parseInt(this.coverPhotoElement.get("offsetWidth"),10),s=parseInt(this.coverPhotoElement.get("offsetHeight"),10),o,u,a,f,l,c;return o=i*e/r,u=t/2,f=u*i/n,a=f-s/2,l=o-a,c=l-s,{min:a,max:c}},e.FluidCoverPhotoEditor.prototype.setupEditorHandlers=function(){var t=this,n=this._determineBoundaries(r.potential.height,r.potential.width);e.one(e.config.win.document.documentElement).addClass("disable-text-select"),this.coverPhotoElement.on("mousedown",function(e){e.halt();var n=t.coverPhotoElement.getStyle("backgroundPosition").split(" "),i=n.length===2?parseInt(n[1],10):0;r.dragging.mouseDownY=e.pageY,r.dragging.previousY=i,r.dragging.startDrag=!0,t.coverPhotoElement.addClass("grabbing")}),this.coverPhotoElement.on("mouseup",function(){r.dragging.startDrag=!1,t.coverPhotoElement.removeClass("grabbing")}),this.coverPhotoElement.on("mouseout",function(){r.dragging.startDrag=!1,t.coverPhotoElement.removeClass("grabbing")}),this.coverPhotoElement.on("mousemove",function(e){e.halt();if(!r.dragging.startDrag)return;var i=r.dragging.mouseDownY-e.pageY,s=r.dragging.previousY-i,o=n.min*-1,u=n.max*-1;s=s>=u?s:u,s=s>o?o:s,r.potential.y=s,t.coverPhotoElement.setStyle("backgroundPosition","50% "+s+"px")})},e.FluidCoverPhotoEditor.prototype.cancelCoverPhotoEditing=function(){this.coverPhotoElement.removeClass("editing"),this.coverPhotoElement.setStyles({backgroundImage:r.original.url,backgroundPosition:"50% 50%"}),this.coverPhotoElement.detachAll(),e.one(e.config.win.document.documentElement).removeClass("disable-text-select")},e.FluidCoverPhotoEditor.prototype.saveCoverPhoto=function(t){var n=this._convertYPositionForApi(r.potential.y,r.original.width),i={photo_id:r.potential.id,y:n},s;t&&(i.group_id=t,s="group"),this.coverPhotoElement.addClass("saving"),e.coverPhotoSaver.save(i,s).then(function(){e.config.win.location.reload()})}},"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom"]});
YUI.add("coverphoto-saver",function(e){"use strict";e.coverPhotoSaver={methods:{photostream:"flickr.coverphoto.setAccountCover",group:"flickr.coverphoto.setGroupCover"},save:function(t,n){var r=e.config.win.appContext,i={group_id:t.group_id,photo_id:t.photo_id,x:Math.abs(t.x||0),y:Math.abs(t.y||0)},s=this.methods[n||"photostream"];return new e.Promise(function(e,t){r.callAPI(s,i).then(function(n){var i=0,s=5,o=2e3,u=function(){r.callAPI("flickr.photos.upload.checkTickets",{tickets:n.coverphoto.ticketId}).then(function(n){var r=n&&n.uploader.ticket[0];i++,r&&r.complete===1?e():i>s?t():setTimeout(u,o)})};n&&n.coverphoto&&n.coverphoto.ticketId&&setTimeout(u,o)},function(e){t(new Error("Cover photo could not be saved."))})})}}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("avatar-saver",function(e){"use strict";e.AvatarSaver={methods:{people:"flickr.people.setBuddyIcon",group:"flickr.groups.setBuddyIcon"},save:function(t,n){var r=e.config.win.appContext,i=this.methods[n||"people"];return new e.Promise(function(e,n){r.callAPI(i,t).then(function(t){var i=0,s=5,o=2e3,u=function(){r.callAPI("flickr.photos.upload.checkTickets",{tickets:t.ticketid.content}).then(function(t){var r=t&&t.uploader.ticket[0];i++,r&&r.complete===1?e():i>s?n():setTimeout(u,o)})};t&&t.ticketid&&setTimeout(u,o)},function(e){n(new Error("Cover photo could not be saved."))})})}}},"@VERSION@",{requires:["flickr-promise"]});
